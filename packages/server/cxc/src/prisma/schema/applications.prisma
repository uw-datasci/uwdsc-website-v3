// prisma/schema/applications.prisma
model Application {
    id           BigInt                  @id @default(autoincrement())
    profile_id   String                  @db.Uuid
    resume_id    BigInt?
    status       application_status_enum @default(draft)
    role         role_enum
    term         String
    comments     String?
    created_at   DateTime                @default(now())
    updated_at   DateTime                @default(now())
    submitted_at DateTime?

    profile Profile             @relation(fields: [profile_id], references: [id])
    resume  Resume?             @relation(fields: [resume_id], references: [id], onDelete: SetNull)
    answers ApplicationAnswer[]

    @@unique([profile_id, role, term])
    @@map("applications")
}
