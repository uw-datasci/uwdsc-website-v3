model event {
  id                    BigInt   @id @default(autoincrement())
  name                  String   @db.VarChar(255)
  registration_required Boolean
  description           String?  @db.Text
  location              String?  @db.VarChar(255)
  start_time            DateTime @db.Timestamptz(6)
  buffered_start_time   DateTime @db.Timestamptz(6)
  end_time              DateTime @db.Timestamptz(6)
  buffered_end_time     DateTime @db.Timestamptz(6)
  payment_required      Boolean  @default(true)
  image_id              BigInt?
  created_at            DateTime @default(now()) @db.Timestamptz(6)
  updated_at            DateTime @default(now()) @updatedAt @db.Timestamptz(6)

  // Relations
  attendances event_attendance[]
}

model event_attendance {
  id         BigInt   @id @default(autoincrement())
  event_id   BigInt
  profile_id String   @db.Uuid
  checked_in Boolean  @default(false)
  created_at DateTime @default(now()) @db.Timestamptz(6)

  // Relations
  event   event   @relation(fields: [event_id], references: [id], onDelete: Cascade)
  profile profile @relation(fields: [profile_id], references: [id], onDelete: Cascade)

  @@unique([event_id, profile_id])
}
